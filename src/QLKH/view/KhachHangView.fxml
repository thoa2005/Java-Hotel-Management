<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane
        xmlns="http://javafx.com/javafx/21"
        xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="QLKH.controller.KhachHangController"
        prefWidth="1000"
        prefHeight="550"
        minWidth="1000"
        minHeight="550"
        stylesheets="@../../taikhoan/css/QLKH.css"
        styleClass="root-pane">

    <!-- ================= TOP ================= -->
    <top>
        <HBox alignment="CENTER_LEFT"
              spacing="12"
              styleClass="top-bar"
              BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" bottom="10" left="15" right="15"/>
            </padding>

            <Label text="QUẢN LÝ KHÁCH HÀNG" styleClass="title-label"/>

            <!-- ⚠️ PHẢI CÓ fx:id="boxSearch" -->
            <HBox fx:id="boxSearch"
                  alignment="CENTER_RIGHT"
                  spacing="10"
                  HBox.hgrow="ALWAYS">

                <TextField fx:id="tfSearch"
                           prefWidth="220"
                           promptText="Tìm kiếm theo tên..."
                           styleClass="search-field"/>

                <Button fx:id="btnSort"
                        text="Sắp xếp tên A-Z"
                        onAction="#handleSort"
                        styleClass="btn-primary"/>
            </HBox>

            <Button text="Trở về"
                    onAction="#handleLogout"
                    styleClass="btn-secondary"/>
        </HBox>
    </top>

    <!-- ================= CENTER ================= -->
    <center>
        <TableView fx:id="tableKhachHang"
                   styleClass="modern-table">
            <columns>
                <TableColumn fx:id="colID" text="ID" prefWidth="60"/>
                <TableColumn fx:id="colName" text="Họ Tên" prefWidth="160"/>
                <TableColumn fx:id="colPhone" text="SĐT" prefWidth="120"/>
                <TableColumn fx:id="colCCCD" text="CCCD" prefWidth="140"/>
                <TableColumn fx:id="colEmail" text="Email" prefWidth="180"/>
                <TableColumn fx:id="colGender" text="Giới Tính" prefWidth="90"/>
                <TableColumn fx:id="colIDUser" text="ID tài khoản tạo" prefWidth="130"/>
            </columns>
        </TableView>
    </center>

    <!-- ================= BOTTOM ================= -->
    <bottom>
        <VBox spacing="12">
            <padding>
                <Insets top="12" bottom="12" left="15" right="15"/>
            </padding>

            <GridPane hgap="15" vgap="12">
                <Label text="Họ Tên:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="tfName" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-field"/>

                <Label text="SĐT:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                <TextField fx:id="tfPhone" GridPane.rowIndex="0" GridPane.columnIndex="3" styleClass="form-field"/>

                <Label text="CCCD:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="tfCCCD" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-field"/>

                <Label text="Email:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <TextField fx:id="tfEmail" GridPane.rowIndex="1" GridPane.columnIndex="3" styleClass="form-field"/>

                <Label text="Giới Tính:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbGender" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-combo"/>

                <Label text="ID (Ẩn):" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                <TextField fx:id="tfID" disable="true"
                           GridPane.rowIndex="2" GridPane.columnIndex="3"
                           styleClass="form-field-disabled"/>
            </GridPane>

            <HBox alignment="CENTER" spacing="18">
                <Button text="Thêm / Khai Báo" fx:id="btnAdd" onAction="#handleAdd" styleClass="btn-success"/>
                <Button text="Sửa" fx:id="btnEdit" onAction="#handleUpdate" styleClass="btn-warning"/>
                <Button text="Xóa" fx:id="btnDelete" onAction="#handleDelete" styleClass="btn-danger"/>
                <Button text="Làm mới form" fx:id="btnClear" onAction="#handleClear" styleClass="btn-secondary"/>
            </HBox>
        </VBox>
    </bottom>

</BorderPane>
